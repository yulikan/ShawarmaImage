# 2025 OOPL Final Report

## 組別資訊

組別：19  
組員：112590008 甘鈺立、112590057 陳昭瑄：  
復刻遊戲：沙威瑪傳奇

## 專案簡介

### 遊戲簡介
一個沙威瑪的餐廳經營遊戲，主要玩法是依據客人的訂單組合製作沙威瑪/販售飲料來賺取金錢，賺超過目標金額可以遊玩下一關，總共有 30 關，遊戲難度會隨著關卡增加。  

### 組別分工
將專案細分成小任務來進行分工：  

**甘鈺立**：遊戲初始介面、垃圾桶功能、配料烤餅合併功能、配料增減功能、通關及失敗頁面、作弊模式跳關功能、遊戲結束畫面、Final report 撰寫 

**陳昭瑄**：出餐功能、菜單功能、薯條機功能、顧客耐心值功能、遊戲金錢計算、罐裝飲料功能、飲料機功能、客製化烤餅功能、訂單設計  

**共同**：素材蒐集、demo 影片製作和剪輯

## 遊戲介紹
### 遊戲規則
本遊戲總共有 30 關，遊戲難度會隨著關卡做調整（耐心值/配料補充/更多餐點/配料客製化），玩家需賺到指定金額才可至下一關，否則須重玩當前關卡。
- 使用滑鼠左鍵拖曳食材
- 點擊配料可以將配料加到烤餅上
- 按 R 鍵可以捲起烤餅
- 點擊馬鈴薯，並連點薯條機五次可以製作薯條
- 點擊飲料機按鈕可以填充飲料
- 第 10 關後，可以點擊老闆右邊的小盒子補充配料
- 點擊果汁一次可以拿出一瓶，拖曳可以使用
- 若做錯食物，可以拖曳到右下角給乞丐吃

**demo 用作弊模式**
- 點擊初始畫面的烤箱會出現關卡選擇頁面，可直接跳到想要遊玩的關卡
- 關卡選擇頁面有兩頁，使用 N/P 鍵來切頁，每頁有 15 關可以選

### 遊戲畫面

1.遊戲初始畫面，點擊"開始一天"可以進入遊戲，"店鋪"則是作弊模式（跳關）。
![github screenshot](https://raw.githubusercontent.com/yulikan/ShawarmaImage/master/homePage1.png)  

2.遊戲畫面，紅圈內的物件由左到右、由上到下分別為：關卡數、配料補充盒子、配料剩餘數量、客人耐心秒數、客人訂單
![github screenshot](https://raw.githubusercontent.com/yulikan/ShawarmaImage/master/GameScreenshot1.png)  

3.遊戲畫面，紅圈內的物件由左到右、由上到下分別為：返回廚房按鈕（回到遊戲初始畫面）、罐裝飲料、飲料機、玩家金錢、薯條機、乞丐（垃圾桶）
![github screenshot](https://raw.githubusercontent.com/yulikan/ShawarmaImage/master/GameScreenshot2.png)  

4.遊戲成功畫面（失敗僅改顏色和字）
![github screenshot](https://raw.githubusercontent.com/yulikan/ShawarmaImage/master/GameWinScreenshot.png) 

5.跳關作弊模式畫面，每五關都有對應的新機制，以小 icon 表示
![github screenshot](https://raw.githubusercontent.com/yulikan/ShawarmaImage/master/GameCheatScreenshot1.png) 

## 程式設計

### 程式架構
```text
include/  
├──App.hpp               // 背景、互動按鈕、配料疊加、客人進食
├──BeverageMachine.hpp   // 飲料機位置設定、點擊判斷
├──Cup.hpp               // 杯裝飲料拖曳、是否有飲料判斷
├──FryingCounterText.hpp // 薯條機點擊計數器  
├──LevelManager.hpp      // 客人訂單、客人更新判斷
├──MoneyManager.hpp      // 遊戲金額顯示設定
├──NextButton.hpp        // 下一關按鈕設定
├──PatienceText.hpp      // 客人耐心值設定
└──Roll.hpp              // 烤餅位置設定、拖曳

src/
├── App.cpp              // 配料、飲料、金額、天數、關卡狀態
├── GlobalVars.cpp       // 物件拖曳
├── LevelManager.cpp     // 菜單生成、客人補充、追蹤關卡進度
├── main.cpp             // 遊戲框架原始設定（未改動）
├── MoneyManager.cpp     // 遊戲金額更新
└── Roll.cpp             // 捲餅拖曳邏輯
```

### 程式技術
- 使用 random 菜單：在實作客人菜單部分，我們原本預計是自己進行關卡設計，但經過討論後，我們決定使用 random 來穩定關卡的多樣性，在參考 Chatgpt 的建議後使用 mt19937 這個隨機數產生引擎來產生我們預期的菜單。
- 關卡功能設置：因為我們每五關都會多一個新的遊戲機制，因此我們特別在 LevelManager.hpp 中加入 SetLevelIndex ，讓我們可以自己設定遊戲機制出現的關卡數，也因此避免很多執行上的衝突。

## 結語

### 問題與解決方法
1.專案在中期的時候就有發現把太多東西寫在 App.cpp 裡面，導致改動越來越困難，程式也很亂，算是真的體驗到缺乏物件導向的痛處了。  
  
後來新建立的功能都開始有分成不同的 hpp 和 cpp 檔，也增加了可讀性，無奈於時間有點不夠，前期製作的部分還未能完全將程式處理乾淨。

2.在製作配料新增的功能時，發現很多按鈕都會彼此誤觸，甚至造成連點，這會讓遊戲過於簡單。

新增拖曳偵測，讓物件拖曳時不會偵測點擊到其他東西，讓遊戲運作更合理。

### 自評

| 項次 | 項目                   | 完成 |
|------|------------------------|-------|
| 1    | 這是範例 |  V  |
| 2    | 完成專案權限改為 public |  V  |
| 3    | 具有 debug mode 的功能  |  V  |
| 4    | 解決專案上所有 Memory Leak 的問題  |  V  |
| 5    | 報告中沒有任何錯字，以及沒有任何一項遺漏  |  V  |
| 6    | 報告至少保持基本的美感，人類可讀  |  V  |

### 心得
**甘鈺立**：在這次的專題中，體驗到遊戲規劃、實作、小組合作的經驗，也是從規劃 Proposal 開始，就學著如何將想法切成小段，一步步實作，寫到後期看著程式越來越完整也很有成就感，雖然我們的專題可能不夠精美，但也讓我們成長很多。  
**陳昭瑄**：通過這次 OOPL 的實作，能讓我更理解物件導向程式設計的運作方式，在復刻遊戲的同時複習上學期學過的內容，並運用在自己的程式中，也能了解到遊戲製作的不容易，看似簡單的功能在製作上也要花上許多心力。

### 貢獻比例
甘鈺立：50%  
陳昭瑄：50%